# 状态码

融云 Server API 使用标准 HTTP 状态码和自定义错误码来标识请求的处理结果。了解这些状态码的含义有助于您快速定位和解决问题。

## HTTP 状态码

### 成功状态码

| 状态码 | 说明 |
|--------|------|
| 200 | 请求成功 |

### 客户端错误状态码

| 状态码 | 说明 |
|--------|------|
| 400 | 请求参数错误 |
| 401 | 未授权，签名验证失败 |
| 403 | 禁止访问，权限不足 |
| 404 | 接口不存在 |
| 429 | 请求频率超限 |

### 服务端错误状态码

| 状态码 | 说明 |
|--------|------|
| 500 | 服务器内部错误 |
| 502 | 网关错误 |
| 503 | 服务不可用 |
| 504 | 网关超时 |

## 融云错误码

### 通用错误码

| 错误码 | 说明 | 解决方案 |
|--------|------|----------|
| 200 | 成功 | - |
| 1000 | 内部服务器错误 | 请联系融云技术支持 |
| 1001 | 请求参数错误 | 检查请求参数格式和必填项 |
| 1002 | 签名验证失败 | 检查 App Secret、Nonce、Timestamp 和签名计算 |
| 1003 | 用户不存在 | 检查用户 ID 是否正确 |
| 1004 | 用户已存在 | 用户已注册，无需重复注册 |
| 1005 | 用户被封禁 | 联系融云客服解封 |
| 1006 | 用户被禁言 | 等待禁言时间结束或联系客服 |
| 1007 | 用户不在线 | 用户当前不在线 |
| 1008 | 用户已在线 | 用户已连接，无需重复连接 |
| 1009 | 用户已离线 | 用户已断开连接 |
| 1010 | 用户已加入群组 | 用户已是群组成员 |
| 1011 | 用户未加入群组 | 用户不是群组成员 |
| 1012 | 群组不存在 | 检查群组 ID 是否正确 |
| 1013 | 群组已存在 | 群组已创建，无需重复创建 |
| 1014 | 群组已解散 | 群组已被解散 |
| 1015 | 群组已满员 | 群组人数已达上限 |
| 1016 | 聊天室不存在 | 检查聊天室 ID 是否正确 |
| 1017 | 聊天室已存在 | 聊天室已创建，无需重复创建 |
| 1018 | 聊天室已关闭 | 聊天室已被关闭 |
| 1019 | 消息不存在 | 检查消息 ID 是否正确 |
| 1020 | 消息已发送 | 消息已成功发送 |
| 1021 | 消息发送失败 | 检查网络连接和参数 |
| 1022 | 消息内容过长 | 缩短消息内容 |
| 1023 | 消息内容包含敏感词 | 修改消息内容 |
| 1024 | 消息类型不支持 | 检查消息类型是否正确 |
| 1025 | 文件上传失败 | 检查文件大小和格式 |
| 1026 | 文件不存在 | 检查文件 ID 是否正确 |
| 1027 | 文件下载失败 | 检查文件是否可访问 |
| 1028 | 推送失败 | 检查推送配置 |
| 1029 | 推送已发送 | 推送已成功发送 |
| 1030 | 推送内容过长 | 缩短推送内容 |
| 1031 | 推送内容包含敏感词 | 修改推送内容 |
| 1032 | 推送类型不支持 | 检查推送类型是否正确 |
| 1033 | 回调失败 | 检查回调地址和格式 |
| 1034 | 回调已发送 | 回调已成功发送 |
| 1035 | 回调地址无效 | 检查回调地址格式 |
| 1036 | 回调超时 | 检查回调服务响应时间 |
| 1037 | 频率限制 | 降低请求频率 |
| 1038 | 配额超限 | 联系融云客服增加配额 |
| 1039 | 服务不可用 | 稍后重试或联系客服 |
| 1040 | 网络超时 | 检查网络连接 |
| 1041 | 数据库错误 | 联系融云技术支持 |
| 1042 | 缓存错误 | 联系融云技术支持 |
| 1043 | 队列错误 | 联系融云技术支持 |
| 1044 | 存储错误 | 联系融云技术支持 |
| 1045 | 计算错误 | 联系融云技术支持 |

### 业务错误码

| 错误码 | 说明 | 解决方案 |
|--------|------|----------|
| 2000 | 用户 Token 无效 | 重新获取用户 Token |
| 2001 | 用户 Token 过期 | 重新获取用户 Token |
| 2002 | 用户 Token 被吊销 | 重新获取用户 Token |
| 2003 | 群组权限不足 | 检查用户权限 |
| 2004 | 聊天室权限不足 | 检查用户权限 |
| 2005 | 消息权限不足 | 检查用户权限 |
| 2006 | 推送权限不足 | 检查应用权限 |
| 2007 | 回调权限不足 | 检查应用权限 |
| 2008 | 用户被踢出群组 | 重新加入群组 |
| 2009 | 用户被踢出聊天室 | 重新加入聊天室 |
| 2010 | 用户被禁言 | 等待禁言时间结束 |
| 2011 | 用户被拉黑 | 联系对方解除拉黑 |
| 2012 | 用户被举报 | 等待处理结果 |
| 2013 | 内容被举报 | 等待处理结果 |
| 2014 | 群组被举报 | 等待处理结果 |
| 2015 | 聊天室被举报 | 等待处理结果 |

## 错误响应格式

当请求失败时，融云会返回包含错误信息的 JSON 响应：

```json
{
    "code": 1001,
    "errorMessage": "请求参数错误",
    "requestId": "abc123def456"
}
```

### 响应字段说明

- **code**：错误码
- **errorMessage**：错误描述
- **requestId**：请求 ID，用于问题排查

## 常见错误处理

### 1. 签名验证失败 (1002)

**原因**：签名计算错误或参数不正确

**解决方案**：
- 检查 App Secret 是否正确
- 检查 Nonce 和 Timestamp 格式
- 验证签名计算逻辑
- 确保使用正确的字符编码

### 2. 请求参数错误 (1001)

**原因**：请求参数格式错误或缺少必填参数

**解决方案**：
- 检查参数名称是否正确
- 检查参数值格式是否符合要求
- 确保所有必填参数都已提供
- 检查参数长度是否超限

### 3. 频率限制 (1037)

**原因**：请求频率超过限制

**解决方案**：
- 降低请求频率
- 实现请求队列和限流机制
- 使用批量接口减少请求次数
- 联系融云客服调整限制

### 4. 用户不存在 (1003)

**原因**：用户未注册或用户 ID 错误

**解决方案**：
- 先调用用户注册接口
- 检查用户 ID 是否正确
- 确认用户是否已被删除

## 调试建议

1. **记录请求日志**：记录完整的请求和响应信息
2. **保存 requestId**：保存错误响应中的 requestId 用于问题排查
3. **检查网络**：确保网络连接正常
4. **验证时间**：检查服务器时间是否准确
5. **测试环境**：先在测试环境验证接口

## 联系支持

如果遇到无法解决的问题，请联系融云技术支持：

- **技术支持**：support@rongcloud.cn
- **客服热线**：400-669-3600
- **在线客服**：融云官网在线客服 